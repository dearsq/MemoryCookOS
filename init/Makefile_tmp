CC=gcc
FLAGS=-g -pg
DEBUG_FLAGS=-C -E -g -Wfatal-errors 
DIR_KERNEL := ../lib/kernel
DIR_MM    := ../lib/mm
SRCS := main.c

SRCS += ${DIR_KERNEL}/atags.c \
		${DIR_KERNEL}/cmdline.c  \
		${DIR_KERNEL}/compat.c   \
		${DIR_KERNEL}/cpuset.c   \
		${DIR_KERNEL}/ctype.c    \
		${DIR_KERNEL}/do_mounts  \
		${DIR_KERNEL}/head.c     \
		${DIR_KERNEL}/hexdump.c  \
		${DIR_KERNEL}/init.c     \
		${DIR_KERNEL}/init_task.c   \
		${DIR_KERNEL}/mach-6410.c   \
		${DIR_KERNEL}/params.c      \
		${DIR_KERNEL}/reboot.c      \
		${DIR_KERNEL}/resource.c    \
		${DIR_KERNEL}/setup.c       \
		${DIR_KERNEL}/sort.c        \
		${DIR_KERNEL}/string.c      \
		${DIR_KERNEL}/vsprintf.c    \
		${DIR_KERNEL}/wait.c    \

SRCS += ${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/
		${DIR_MM}/

INC= -I./
TARGET=align
OBJS = ${SRCS:.c=.o}
LOG_FILE=debug.log
${TARGET}:
	${CC} ${SRCS} ${FLAGS} -o ${TARGET} 2>&1|tee compiler.log
	ctags -R
	./${TARGET}
#	./${TARGET} > ${LOG_FILE}
#	vim ${LOG_FILE}
debug:
	${CC} ${SRCS} ${DEBUG_FLAGS}
memblock.o:
	${CC} ../lib/mm/memblock.c ${FLAGS} -c
clean:
	rm -rf *.o *.out
	ctags -R
	rm ${TARGET}
	rm ${LOG_FILE}
